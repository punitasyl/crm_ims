# üöÄ –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π –≤ Railway

## ‚úÖ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø–µ—Ä–µ–¥ –ø—É—à–µ–º

### 1. –í Railway Dashboard

1. **–°–æ–∑–¥–∞–π—Ç–µ PostgreSQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
   - –í –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ Railway ‚Üí "New" ‚Üí "Database" ‚Üí "Add PostgreSQL"
   - Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –±–∞–∑—É –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç `DATABASE_URL`

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≤–∞—à —Å–µ—Ä–≤–∏—Å ‚Üí "Variables"
   - –î–æ–±–∞–≤—å—Ç–µ:
     ```
     DATABASE_URL=<—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ PostgreSQL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö>
     SECRET_KEY=<—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ: python -c "import secrets; print(secrets.token_urlsafe(32))">
     CORS_ORIGINS=https://your-frontend-domain.vercel.app
     ```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Root Directory (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):**
   - –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å–µ—Ä–≤–∏—Å–∞ ‚Üí "Settings" ‚Üí "Root Directory"
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ: `backend`
   - –ò–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `railway.json` (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)

### 2. –ó–∞–ø—É—à—å—Ç–µ –∫–æ–¥

```bash
git add .
git commit -m "Deploy to production"
git push origin main
```

### 3. –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

‚úÖ Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –û–±–Ω–∞—Ä—É–∂–∏—Ç Python –ø—Ä–æ–µ–∫—Ç
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `requirements.txt` (–≤–∫–ª—é—á–∞—è `psycopg2-binary`)
- –ó–∞–ø—É—Å—Ç–∏—Ç `uvicorn app.main:app`
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Å–æ–∑–¥–∞—Å—Ç –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –≤ PostgreSQL (—á–µ—Ä–µ–∑ `Base.metadata.create_all()`)

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Railway:
- –î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–∞–±–ª–∏—Ü
- –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### 5. –°–æ–∑–¥–∞–π—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è —Å–æ–∑–¥–∞–π—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Railway Shell**
- –í Railway ‚Üí –≤–∞—à —Å–µ—Ä–≤–∏—Å ‚Üí "Deployments" ‚Üí "View Logs" ‚Üí "Shell"
- –í—ã–ø–æ–ª–Ω–∏—Ç–µ:
  ```bash
  cd backend
  python create_admin.py
  ```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω–æ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω DATABASE_URL)**
```bash
export DATABASE_URL="postgresql://user:password@host:port/dbname"
cd backend
python create_admin.py
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

- [ ] PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞ –≤ Railway
- [ ] `DATABASE_URL` –¥–æ–±–∞–≤–ª–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [ ] `SECRET_KEY` —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∏ –¥–æ–±–∞–≤–ª–µ–Ω
- [ ] `CORS_ORIGINS` –Ω–∞—Å—Ç—Ä–æ–µ–Ω (URL –≤–∞—à–µ–≥–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞)
- [ ] –ö–æ–¥ –∑–∞–ø—É—à–µ–Ω –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- [ ] Railway –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –≤–∞—à –±—ç–∫–µ–Ω–¥ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:
`https://your-app.railway.app`

API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
`https://your-app.railway.app/docs`

---

## üêõ –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

### –û—à–∏–±–∫–∞: "No module named 'psycopg2'"
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `psycopg2-binary>=2.9.9` –≤ `requirements.txt` ‚úÖ (—É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ)

### –û—à–∏–±–∫–∞: "Connection refused" –∏–ª–∏ "Database does not exist"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DATABASE_URL` –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø—É—â–µ–Ω–∞

### –û—à–∏–±–∫–∞: "Tables not created"

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Railway:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ Railway ‚Üí –≤–∞—à —Å–µ—Ä–≤–∏—Å ‚Üí "Deployments" ‚Üí –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π ‚Üí "View Logs"
2. –ò—â–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
   - `üöÄ Starting CRM IMS Backend...`
   - `üìä Database URL: ...` (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `postgresql://...`, –ù–ï `sqlite://...`)
   - `‚úÖ Database tables created successfully!` –∏–ª–∏ `‚ùå ERROR: ...`

**–ï—Å–ª–∏ DATABASE_URL –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç SQLite:**
- DATABASE_URL –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –î–æ–±–∞–≤—å—Ç–µ DATABASE_URL –∏–∑ PostgreSQL —Å–µ—Ä–≤–∏—Å–∞ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤–µ–±-—Å–µ—Ä–≤–∏—Å–∞

**–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ PostgreSQL —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç DATABASE_URL (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `postgresql://...`)

**–°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—ã –≤—Ä—É—á–Ω—É—é:**
```bash
# –í Railway Shell
cd backend
python init_postgresql.py
```

**–ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:**
```bash
cd backend
python check_database.py
```

### –û—à–∏–±–∫–∞: "Module not found"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Root Directory —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `backend`
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É —Å `cd backend` –≤ `railway.json` (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)

